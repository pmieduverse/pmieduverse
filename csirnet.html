<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PMI Eduverse Online Examination Portal</title>
    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">
    <style>
        .question-active {
            background-color: #3b82f6;
            color: white;
        }
        #branding {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: #1f2937;
            color: white;
            overflow: hidden;
            z-index: 1000;
        }
        #branding span {
            display: inline-block;
            white-space: nowrap;
            animation: slide 10s linear infinite;
        }
        @keyframes slide {
            from { transform: translateX(100%); }
            to { transform: translateX(-100%); }
        }
        .disabled-link {
            pointer-events: none;
            opacity: 0.6;
        }
        .blur-screen {
            filter: blur(5px);
            pointer-events: none;
        }
        @media print {
            body {
                display: none;
            }
        }
        .result-card {
            transition: all 0.3s ease;
        }
        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .progress-bar {
            height: 8px;
            border-radius: 4px;
            background: #e2e8f0;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            transition: width 1s ease-in-out;
        }
        .stat-card {
            border-left: 4px solid;
            transition: all 0.3s ease;
        }
        .stat-card:hover {
            transform: scale(1.02);
        }
    </style>
</head>
<body class="bg-gray-100 font-sans antialiased">
    <!-- Warning Modal -->
    <div id="warning-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center">
        <div class="bg-white p-8 rounded-lg shadow-xl max-w-md">
            <h3 class="text-xl font-bold text-red-600 mb-4">‚ö†Ô∏è Warning!</h3>
            <p class="mb-4">You have exited fullscreen mode. Would you like to return to login page?</p>
            <div class="flex justify-between">
                <button onclick="returnToLogin()" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">
                    Yes
                </button>
                <button onclick="closeWarningModal()" class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700">
                    No
                </button>
            </div>
        </div>
    </div>

    <!-- Submit Confirmation Modal -->
    <div id="submit-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center">
        <div class="bg-white p-8 rounded-lg shadow-xl max-w-md">
            <h3 class="text-xl font-bold text-blue-600 mb-4">üìù Confirm Submission</h3>
            <p class="mb-4">Are you sure you want to submit your test? Please verify all your answers before submitting.</p>
            <div class="flex justify-between">
                <button onclick="confirmSubmit()" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
                    Yes, Submit
                </button>
                <button onclick="closeSubmitModal()" class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700">
                    No, Review Again
                </button>
            </div>
        </div>
    </div>

    <!-- Login Page -->
    <div id="login-page" class="flex items-center justify-center min-h-screen bg-gradient-to-r from-blue-500 to-purple-600">
        <div class="bg-white p-8 rounded-lg shadow-xl w-96">
            <div class="text-center mb-6">
                <i class="fas fa-user-graduate text-5xl text-blue-600"></i>
                <h2 class="text-2xl font-bold text-gray-800 mt-4">Student Login</h2>
            </div>
            <div class="space-y-4">
                <input type="text" id="roll-number" class="w-full p-3 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:outline-none" placeholder="Enter Roll Number" required />
                <input type="text" id="student-name" class="w-full p-3 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:outline-none" placeholder="Enter Full Name" required />
                <button id="login-button" class="w-full bg-blue-600 text-white py-3 rounded hover:bg-blue-700 transition duration-200">
                    Start Exam <i class="fas fa-arrow-right ml-2"></i>
                </button>
            </div>
        </div>
    </div>

    <div id="quiz-page" class="hidden max-w-7xl mx-auto p-6">
        <!-- Header -->
        <header class="bg-white rounded-lg shadow-lg p-4 mb-6">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-2xl font-bold text-blue-700">PMI Eduverse Online Exam</h1>
                    <p class="text-gray-600">
                        <span class="font-semibold">Name: </span>
                        <span id="user-name" class="text-blue-500"></span>
                    </p>
                    <p class="text-gray-600">
                        <span class="font-semibold">Roll Number: </span>
                        <span id="user-roll-number" class="text-blue-500"></span>
                    </p>
                </div>
                <div class="text-center">
                    <div id="timer" class="text-3xl font-bold text-red-500">00:01</div>
                    <p class="text-gray-600">Time Remaining</p>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="flex gap-6">
            <!-- Question Section -->
            <div class="flex-1 bg-white rounded-lg shadow-lg p-6">
                <div id="question-container" class="mb-6">
                    <!-- Questions will be loaded here -->
                </div>

                <!-- Action Buttons -->
                <div class="flex justify-between items-center mt-6">
                    <button id="prev-question" class="bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600 transition duration-200 disabled:opacity-50">
                        <i class="fas fa-arrow-left mr-2"></i> Previous
                    </button>
                    <button id="skip" class="bg-yellow-500 text-white px-6 py-2 rounded hover:bg-yellow-600 transition duration-200">
                        <i class="fas fa-forward mr-2"></i> Skip
                    </button>
                    <button id="save-next" class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition duration-200">
                        Save & Next <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                    <button id="save-last" class="hidden bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700 transition duration-200">
                        Save Answer
                    </button>
                </div>
            </div>

            <!-- Question Navigator -->
            <div class="w-1/4">
                <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                    <h2 class="text-lg font-semibold text-gray-700 mb-4">Question Navigator</h2>
                    <div class="mb-4">
                        <div class="flex items-center space-x-2 text-sm mb-2">
                            <span class="w-4 h-4 bg-green-500 rounded"></span>
                            <span>Answered</span>
                            <span class="w-4 h-4 bg-yellow-500 rounded ml-4"></span>
                            <span>Skipped</span>
                        </div>
                        <div class="flex items-center space-x-2 text-sm">
                            <span class="w-4 h-4 bg-gray-300 rounded"></span>
                            <span>Not Visited</span>
                            <span class="w-4 h-4 bg-blue-500 rounded ml-4"></span>
                            <span>Current</span>
                        </div>
                    </div>
                    <div id="question-buttons" class="grid grid-cols-5 gap-2">
                        <!-- Question buttons will be loaded here -->
                    </div>
                </div>

                <!-- Submit Section -->
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h2 class="text-lg font-semibold text-gray-700 mb-4">Exam Summary</h2>
                    <div class="space-y-2 mb-6">
                        <p><span class="font-medium">Answered:</span> <span id="answered-count">0</span></p>
                        <p><span class="font-medium">Skipped:</span> <span id="skipped-count">0</span></p>
                        <p><span class="font-medium">Remaining:</span> <span id="remaining-count">5</span></p>
                    </div>
                    <button id="submit-test" class="w-full bg-green-600 text-white py-3 rounded hover:bg-green-700 transition duration-200">
                        <i class="fas fa-check-circle mr-2"></i> Submit Test
                    </button>
                </div>
            </div>
        </div>

        <!-- Enhanced Result Section -->
        <div id="result-container" class="hidden mt-6">
            <!-- Result Header -->
            <div class="bg-white rounded-lg shadow-lg p-8 mb-6">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-800">Test Analysis Report</h2>
                    <p class="text-gray-600 mt-2">Detailed performance breakdown of your examination</p>
                </div>

                <!-- Score Overview Cards -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                    <!-- Final Score Card -->
                    <div class="result-card bg-gradient-to-br from-blue-500 to-blue-600 p-6 rounded-lg text-white">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm opacity-80">Final Score</p>
                                <h3 class="text-3xl font-bold mt-1"><span id="final-score">0</span>%</h3>
                            </div>
                            <i class="fas fa-star text-4xl opacity-80"></i>
                        </div>
                    </div>

                    <!-- Correct Answers Card -->
                    <div class="stat-card border-green-500 bg-white p-6 rounded-lg">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600">Correct Answers</p>
                                <h3 class="text-2xl font-bold text-green-500 mt-1"><span id="correct-count">0</span></h3>
                            </div>
                            <i class="fas fa-check-circle text-3xl text-green-500 opacity-80"></i>
                        </div>
                    </div>

                    <!-- Wrong Answers Card -->
                    <div class="stat-card border-red-500 bg-white p-6 rounded-lg">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600">Wrong Answers</p>
                                <h3 class="text-2xl font-bold text-red-500 mt-1"><span id="wrong-count">0</span></h3>
                            </div>
                            <i class="fas fa-times-circle text-3xl text-red-500 opacity-80"></i>
                        </div>
                    </div>

                    <!-- Skipped Questions Card -->
                    <div class="stat-card border-yellow-500 bg-white p-6 rounded-lg">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600">Skipped Questions</p>
                                <h3 class="text-2xl font-bold text-yellow-500 mt-1"><span id="final-skipped-count">0</span></h3>
                            </div>
                            <i class="fas fa-forward text-3xl text-yellow-500 opacity-80"></i>
                        </div>
                    </div>
                </div>

                <!-- Performance Progress Bar -->
                <div class="bg-white p-6 rounded-lg mb-8">
                    <h3 class="text-lg font-semibold text-gray-700 mb-4">Performance Overview</h3>
                    <div class="bg-gray-200 h-4 rounded-full mb-2 overflow-hidden">
                        <div id="performance-bar" class="h-full bg-blue-500 transition-all duration-500" style="width: 0%"></div>
                    </div>
                    <div class="flex justify-between text-sm text-gray-600">
                        <span>0%</span>
                        <span>50%</span>
                        <span>100%</span>
                    </div>
                </div>

                <!-- Detailed Analysis -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Question-wise Analysis -->
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h3 class="text-lg font-semibold text-gray-700 mb-4">Question-wise Analysis</h3>
                        <div id="result-details" class="max-h-80 overflow-y-auto space-y-2">
                            <!-- Will be populated dynamically -->
                        </div>
                    </div>

                    <!-- Performance Analytics -->
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h3 class="text-lg font-semibold text-gray-700 mb-4">Performance Analytics</h3>
                        <div class="space-y-6">
                            <!-- Time Stats -->
                            <div class="grid grid-cols-2 gap-4">
                                <div class="bg-blue-50 p-4 rounded-lg">
                                    <p class="text-sm text-gray-600 mb-2">Total Time</p>
                                    <div class="flex items-center">
                                        <i class="far fa-clock text-2xl text-blue-500 mr-3"></i>
                                        <div>
                                            <p class="text-2xl font-bold text-gray-800" id="time-taken">00:01</p>
                                            <p class="text-sm text-gray-600" id="time-taken-seconds">(60 seconds)</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="bg-green-50 p-4 rounded-lg">
                                    <p class="text-sm text-gray-600 mb-2">Avg Time/Question</p>
                                    <div class="flex items-center">
                                        <i class="fas fa-stopwatch text-2xl text-green-500 mr-3"></i>
                                        <div>
                                            <p class="text-2xl font-bold text-gray-800" id="avg-time">00:01</p>
                                            <p class="text-sm text-gray-600" id="avg-time-seconds">(60 seconds)</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Speed Meter -->
                            <div>
                                <p class="text-sm text-gray-600 mb-2">Answer Speed</p>
                                <div class="relative pt-1">
                                    <div class="flex mb-2 items-center justify-between">
                                        <div class="text-xs text-red-600">Slow</div>
                                        <div class="text-xs text-yellow-600">Moderate</div>
                                        <div class="text-xs text-green-600">Fast</div>
                                    </div>
                                    <div class="overflow-hidden h-2 mb-4 text-xs flex rounded bg-gray-200">
                                        <div id="speed-indicator" class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-500 transition-all duration-500" style="width: 50%"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- Time Distribution Chart -->
                            <div>
                                <p class="text-sm text-gray-600 mb-2">Time Distribution</p>
                                <div class="h-60 bg-gray-50 rounded-lg p-6" id="time-distribution-chart">
                                    <!-- Chart will be rendered here using Chart.js -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Share Results Section -->
            <div class="text-center mb-8">
                <h3 class="text-lg font-semibold text-gray-700 mb-4">Share Your Results</h3>
                <div class="flex justify-center space-x-4">
                    <a href="https://t.me/pmieduverseQuiz" target="_blank" rel="noopener noreferrer" 
                       class="bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition duration-200 flex items-center">
                        <i class="fab fa-telegram mr-2"></i> Share on Telegram
                    </a>
                    <button onclick="downloadResult()" 
                            class="bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600 transition duration-200 flex items-center">
                        <i class="fas fa-download mr-2"></i> Download Report
                    </button>
                </div>
            </div>
            <script>
                async function downloadResult() {
                    try {
                        if (typeof window.jspdf === 'undefined') {
                            await new Promise((resolve, reject) => {
                                const script = document.createElement('script');
                                script.src = 'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js';
                                script.onload = resolve;
                                script.onerror = reject;
                                document.head.appendChild(script);
                            });
                        }

                        const { jsPDF } = window.jspdf;
                        const doc = new jsPDF();

                        // Modern Header with Gradient
                        doc.setFillColor(63, 81, 181); // Material Blue
                        doc.rect(0, 0, 220, 40, 'F');
                        doc.setTextColor(255, 255, 255);
                        doc.setFontSize(28);
                        doc.setFont("helvetica", "bold");
                        doc.text("Performance Report", 15, 25);

                        // Date with modern styling
                        doc.setTextColor(158, 158, 158); // Gray
                        doc.setFontSize(10);
                        doc.text(`Generated on ${new Date().toLocaleDateString('en-US', { 
                            year: 'numeric', 
                            month: 'long', 
                            day: 'numeric',
                            hour: '2-digit',
                            minute: '2-digit'
                        })}`, 15, 45);

                        // Score Card with Material Design
                        doc.setFillColor(255, 255, 255);
                        doc.roundedRect(15, 55, 180, 60, 3, 3, 'F');
                        doc.setTextColor(33, 33, 33);
                        doc.setFontSize(20);
                        
                        const score = parseInt(document.getElementById('final-score').textContent);
                        doc.text(`${score}%`, 30, 85);
                        doc.setFontSize(14);
                        doc.setTextColor(158, 158, 158);
                        doc.text("Overall Score", 30, 100);

                        // Performance Stats
                        doc.setFillColor(250, 250, 250);
                        doc.roundedRect(15, 125, 180, 70, 3, 3, 'F');
                        doc.setTextColor(33, 33, 33);
                        doc.setFontSize(16);
                        doc.text("Performance Analytics", 30, 145);
                        
                        const correct = document.getElementById('correct-count').textContent;
                        const wrong = document.getElementById('wrong-count').textContent;
                        
                        doc.setFontSize(12);
                        doc.setTextColor(76, 175, 80); // Green
                        doc.text(`‚úì Correct: ${correct}`, 40, 165);
                        doc.setTextColor(244, 67, 54); // Red
                        doc.text(`‚úó Wrong: ${wrong}`, 120, 165);
                        
                        // Time Stats
                        doc.text(`‚è± Time: ${document.getElementById('time-taken').textContent}`, 40, 180);
                        doc.text(`‚åõ Avg: ${document.getElementById('avg-time').textContent}`, 120, 180);

                        // Answer Key Section
                        doc.addPage();
                        doc.setFillColor(63, 81, 181);
                        doc.rect(0, 0, 220, 20, 'F');
                        doc.setTextColor(255, 255, 255);
                        doc.setFontSize(16);
                        doc.text("Answer Key", 15, 15);

                        let yPos = 40;
                        doc.setTextColor(33, 33, 33);
                        doc.setFontSize(12);
                        
                        questions.forEach((q, index) => {
                            if (selectedAnswers[index] !== q.correctAnswer) {
                                doc.setTextColor(244, 67, 54); // Red for wrong answers
                                doc.text(`Q${index + 1}: ${q.options[q.correctAnswer]}`, 20, yPos);
                                yPos += 15;
                                
                                if (yPos > 270) {
                                    doc.addPage();
                                    doc.setFillColor(63, 81, 181);
                                    doc.rect(0, 0, 220, 20, 'F');
                                    yPos = 40;
                                }
                            }
                        });

                        // Modern Footer
                        doc.setFillColor(63, 81, 181);
                        doc.rect(0, 275, 220, 20, 'F');
                        doc.setTextColor(255, 255, 255);
                        doc.setFontSize(10);
                        doc.text("PMI Eduverse", 15, 287);
                        doc.text("www.pmieduverse.com", 150, 287);

                        const filename = `PMI_Report_${new Date().toISOString().split('T')[0]}.pdf`;
                        doc.save(filename);
                    } catch (error) {
                        console.error('Error generating PDF:', error);
                        alert('Failed to generate PDF. Please try again.');
                    }
                }
            </script>

    <!-- Branding Footer -->
    <div id="branding" class="fixed-bottom bg-dark text-white py-2 text-center">
        <span><i class="fas fa-graduation-cap mr-2"></i> PMI Eduverse | Online Examination Portal | All Rights Reserved 2025</span>
    </div>

    <script>
        // Sample questions data
        const questions = [
            {
                question: "What type of transport protein is responsible for moving ions in opposite directions across a membrane?",
                options: ["Symporter", "Antiporter", "Permease", "Channel protein"],
                correctAnswer: 1
            },
            {
                question: "What is the role of permeases in facilitated diffusion?",
                options: [
                    "They generate ATP for transport processes", 
                    "They bind specific solutes and facilitate their passage across the membrane",
                    "They create electrochemical gradients",
                    "They provide structural integrity to the membrane"
                ],
                correctAnswer: 1
            },
            {
                question: "In secondary active transport, what drives the movement of one solute against its concentration gradient?",
                options: [
                    "Direct ATP hydrolysis",
                    "Electrochemical potential gradient created by another solute's movement",
                    "Passive diffusion", 
                    "Mechanical forces acting on the membrane"
                ],
                correctAnswer: 1
            },
            {
                question: "Which type of ion channel opens in response to changes in membrane potential?",
                options: [
                    "Ligand-gated channel",
                    "Mechanosensitive channel", 
                    "Voltage-gated channel",
                    "Aquaporin channel"
                ],
                correctAnswer: 2
            },
            {
                question: "The Na+/K+ ATPase pump is an example of which type of transport?",
                options: [
                    "Passive transport",
                    "Primary active transport",
                    "Secondary active transport",
                    "Facilitated diffusion"
                ],
                correctAnswer: 1
            },
            {
                question: "Which mechanism allows for the simultaneous transport of two solutes in the same direction across a membrane?",
                options: ["Antiport", "Symport", "Simple diffusion", "Facilitated diffusion"],
                correctAnswer: 1
            },
            {
                question: "What characterizes primary active transport?",
                options: [
                    "It relies solely on diffusion processes",
                    "It does not require any energy input",
                    "It utilizes ATP or other energy sources to move ions against their gradient",
                    "It occurs only in plant cells"
                ],
                correctAnswer: 2
            },
            {
                question: "In facilitated diffusion, which type of proteins assist in transporting molecules across the membrane?",
                options: ["Enzymes", "Receptors", "Transport proteins (permeases)", "Structural proteins"],
                correctAnswer: 2
            },
            {
                question: "What is the primary function of ion channels in cellular membranes?",
                options: [
                    "To actively transport ions against their gradient",
                    "To facilitate the passive movement of specific ions",
                    "To synthesize ATP",
                    "To provide structural support to the membrane"
                ],
                correctAnswer: 1
            },
            {
                question: "Which of the following correctly describes passive transport?",
                options: [
                    "Requires metabolic energy",
                    "Moves substances against their concentration gradient",
                    "Occurs along the concentration gradient",
                    "Involves the use of pumps"
                ],
                correctAnswer: 2
            },
            {
                question: "The term \"co-transport\" refers to which of the following processes?",
                options: [
                    "Movement of ions through ion channels",
                    "Simultaneous movement of two solutes either in the same or opposite directions",
                    "Movement of water through aquaporins",
                    "Passive movement down concentration gradients"
                ],
                correctAnswer: 1
            },
            {
                question: "In plants, which mechanism primarily drives mineral uptake against their concentration gradients?",
                options: ["Passive transport", "Active transport", "Simple diffusion", "Osmosis"],
                correctAnswer: 1
            },
            {
                question: "What regulates the opening and closing of gated ion channels?",
                options: [
                    "Concentration gradients",
                    "Membrane potential changes or ligand binding",
                    "Temperature changes",
                    "pH levels"
                ],
                correctAnswer: 1
            },
            {
                question: "The process by which glucose enters cells via sodium co-transport is an example of:",
                options: [
                    "Primary active transport",
                    "Secondary active transport",
                    "Simple diffusion",
                    "Facilitated diffusion"
                ],
                correctAnswer: 1
            },
            {
                question: "What type of molecules typically undergo simple diffusion across membranes?",
                options: [
                    "Large polar molecules",
                    "Small non-polar molecules",
                    "Charged ions",
                    "Macromolecules"
                ],
                correctAnswer: 1
            },
            {
                question: "How does facilitated diffusion differ from simple diffusion?",
                options: [
                    "Facilitated diffusion requires energy; simple diffusion does not",
                    "Facilitated diffusion uses specific proteins; simple diffusion does not",
                    "Facilitated diffusion occurs against concentration gradients; simple diffusion does not",
                    "Simple diffusion requires specific proteins; facilitated diffusion does not"
                ],
                correctAnswer: 1
            },
            {
                question: "Which of the following processes involves no change in charge across the membrane?",
                options: [
                    "Electrogenic pumps",
                    "Primary active transport",
                    "Secondary active transport",
                    "Electronegative pumps"
                ],
                correctAnswer: 3
            },
            {
                question: "What happens during primary active transport when ATP is hydrolyzed?",
                options: [
                    "Ions move down their concentration gradient",
                    "Energy is released to pump ions against their gradient",
                    "No energy is required",
                    "Ions are transported through channels only"
                ],
                correctAnswer: 1
            },
            {
                question: "Which type of transport involves the simultaneous movement of two different solutes in the same direction?",
                options: ["Antiport", "Symport", "Simple diffusion", "Endocytosis"],
                correctAnswer: 1
            },
            {
                question: "During facilitated diffusion, how do transporter proteins assist in moving solutes across the membrane?",
                options: [
                    "By altering their shape to shield the solute from the hydrophobic core",
                    "By hydrolyzing ATP",
                    "By creating an electrochemical gradient",
                    "By forming vesicles around the solute"
                ],
                correctAnswer: 0
            },
            {
                question: "What is the primary driving force for secondary active transport in plants?",
                options: [
                    "ATP hydrolysis",
                    "Electrochemical proton gradient",
                    "Ion concentration gradients",
                    "Mechanical forces"
                ],
                correctAnswer: 1
            },
            {
                question: "Which type of ion channel opens in response to changes in membrane potential?",
                options: [
                    "Ligand-gated channel",
                    "Mechanosensitive channel",
                    "Voltage-gated channel",
                    "Aquaporin channel"
                ],
                correctAnswer: 2
            },
            {
                question: "What mechanism allows ions to move in both directions across the membrane?",
                options: ["Symport only", "Antiport only", "Ion channels", "Facilitated diffusion only"],
                correctAnswer: 2
            },
            {
                question: "Which ion pump is an example of an electrogenic transporter?",
                options: [
                    "Na+/K+ ATPase pump",
                    "H+/K+ ATPase pump",
                    "Ca2+ pump",
                    "Cl- channel"
                ],
                correctAnswer: 0
            },
            {
                question: "In which type of transport do protons drive the movement of another solute against its concentration gradient?",
                options: [
                    "Primary active transport",
                    "Secondary active transport",
                    "Simple diffusion",
                    "Osmosis"
                ],
                correctAnswer: 1
            },
            {
                question: "What type of protein facilitates facilitated diffusion?",
                options: [
                    "Receptors",
                    "Enzymes",
                    "Transport proteins (permeases)",
                    "Structural proteins"
                ],
                correctAnswer: 2
            },
            {
                question: "Which of the following statements about simple diffusion is true?",
                options: [
                    "It requires specific transport proteins",
                    "It moves substances against their concentration gradient",
                    "It is a slow process for larger molecules",
                    "It is mediated by ATP hydrolysis"
                ],
                correctAnswer: 2
            },
            {
                question: "Ion channels are primarily responsible for which type of transport?",
                options: ["Active transport", "Passive transport", "Bulk flow", "Endocytosis"],
                correctAnswer: 1
            },
            {
                question: "Which of the following is a characteristic of primary active transport?",
                options: [
                    "Movement occurs along the concentration gradient",
                    "Utilizes ATP to move ions against their gradient",
                    "Involves ion channels only",
                    "Does not involve any proteins"
                ],
                correctAnswer: 1
            },
            {
                question: "What type of transport does not require metabolic energy and occurs along the concentration gradient?",
                options: [
                    "Active transport",
                    "Facilitated diffusion",
                    "Secondary active transport",
                    "Primary active transport"
                ],
                correctAnswer: 1
            },
            {
                question: "Which hormone acts as an important regulator of food intake by affecting gallbladder function?",
                options: ["Secretin", "Cholecystokinin", "Somatostatin", "Enterogastrone"],
                correctAnswer: 1
            },
            {
                question: "What physiological process occurs when oxygen is transported from blood to body tissues?",
                options: ["Ventilation", "Diffusion", "Circulation", "Respiration"],
                correctAnswer: 1
            },
            {
                question: "What type of muscle contraction primarily drives expiration during normal breathing?",
                options: [
                    "Diaphragm contraction",
                    "Intercostal muscle relaxation",
                    "Accessory muscle contraction",
                    "Abdominal muscle contraction"
                ],
                correctAnswer: 1
            },
            {
                question: "Which component is NOT involved in hemostasis?",
                options: ["Platelets", "Red blood cells", "Clotting factors", "Endothelial cells"],
                correctAnswer: 1
            },
            {
                question: "What triggers the release of secretin from the duodenum?",
                options: [
                    "Presence of fats",
                    "Presence of acid",
                    "Presence of carbohydrates",
                    "Presence of proteins"
                ],
                correctAnswer: 1
            },
            {
                question: "Which phase of respiration involves gas exchange between alveoli and blood?",
                options: ["Inspiration", "Expiration", "Internal respiration", "External respiration"],
                correctAnswer: 3
            },
            {
                question: "How does the diaphragm contribute to inhalation?",
                options: [
                    "By relaxing to decrease thoracic volume",
                    "By contracting to increase thoracic volume",
                    "By pushing air out of the lungs",
                    "By filtering incoming air"
                ],
                correctAnswer: 1
            },
            {
                question: "What role does ADP play in platelet plug formation?",
                options: [
                    "It promotes vasodilation",
                    "It attracts more platelets to the injury site",
                    "It inhibits platelet aggregation",
                    "It enhances fibrinogen synthesis"
                ],
                correctAnswer: 1
            },
            {
                question: "Which hormone assists in neutralizing gastric acid in the duodenum?",
                options: ["Secretin", "Cholecystokinin", "Somatostatin", "Vilikinin"],
                correctAnswer: 0
            },
            {
                question: "What is the main purpose of ventilation in respiration?",
                options: [
                    "Gas exchange between blood and tissues",
                    "Breathing air in and out of the lungs",
                    "Transporting oxygen to cells",
                    "Eliminating carbon dioxide from cells"
                ],
                correctAnswer: 1
            },
            {
                question: "Which factor promotes platelet adhesion during primary hemostasis?",
                options: ["Collagen exposure", "Thromboxane A2", "Serotonin", "ADP"],
                correctAnswer: 0
            },
            {
                question: "What is the primary purpose of vasoconstriction at an injury site?",
                options: [
                    "To increase blood flow",
                    "To decrease blood loss",
                    "To promote platelet aggregation",
                    "To enhance nutrient delivery"
                ],
                correctAnswer: 1
            },
            {
                question: "During pulmonary gas exchange, what is exchanged at the alveolar surface?",
                options: [
                    "Oxygen for glucose",
                    "Carbon dioxide for nutrients",
                    "Carbon dioxide for oxygen",
                    "Nitrogen for carbon dioxide"
                ],
                correctAnswer: 2
            },
            {
                question: "What initiates inhalation during the breathing process?",
                options: [
                    "Intercostal muscles only",
                    "Diaphragm contraction only",
                    "Diaphragm and external intercostal muscles",
                    "Accessory muscles only"
                ],
                correctAnswer: 2
            },
            {
                question: "Which process involves the diffusion of oxygen from alveoli into the blood?",
                options: ["Ventilation", "Internal respiration", "External respiration", "Cellular respiration"],
                correctAnswer: 2
            },
            {
                question: "What is the role of somatostatin in the pancreas?",
                options: [
                    "Stimulating insulin release",
                    "Inhibiting glucagon and insulin secretion",
                    "Enhancing digestive enzyme activity",
                    "Promoting bile production"
                ],
                correctAnswer: 1
            },
            {
                question: "In which part of the body does external respiration primarily occur?",
                options: ["Heart", "Lungs", "Liver", "Kidneys"],
                correctAnswer: 1
            },
            {
                question: "Enterogastrone (GIP) primarily inhibits which of the following processes?",
                options: [
                    "Bile secretion",
                    "Gastric secretion and motility",
                    "Pancreatic enzyme release",
                    "Nutrient absorption"
                ],
                correctAnswer: 1
            },
            {
                question: "What is the primary function of cholecystokinin in the digestive process?",
                options: [
                    "Inhibiting gastric motility",
                    "Stimulating bile release and enzyme secretion", 
                    "Promoting bicarbonate secretion",
                    "Enhancing glucose metabolism"
                ],
                correctAnswer: 1
            },
            {
                question: "Which hormone is primarily responsible for stimulating the release of bicarbonate in pancreatic juice?",
                options: ["Cholecystokinin", "Secretin", "Somatostatin", "Enterogastrone"],
                correctAnswer: 1
            },
            {
                question: "What is the primary cause of climate change?",
                options: ["Deforestation", "Burning of fossil fuels", "Overpopulation", "Natural variations"],
                correctAnswer: 1
            },
            {
                question: "Which of the following is NOT an example of a biotic factor?",
                options: ["Bacteria", "Temperature", "Plants", "Animals"],
                correctAnswer: 1
            },
            {
                question: "Which of the following is an example of a mutualistic relationship?",
                options: [
                    "A bee pollinates a flower",
                    "A lion preys on a zebra",
                    "A cuckoo lays its eggs in another bird's nest",
                    "A remora fish attaches to a shark"
                ],
                correctAnswer: 0
            },
            {
                question: "In the context of ecological succession, what is the first species to colonize a barren environment?",
                options: ["Pioneer species", "Climax species", "Keystone species", "Invasive species"],
                correctAnswer: 0
            },
            {
                question: "Which of the following ecosystems has the highest biodiversity?",
                options: ["Tundra", "Desert", "Tropical rainforest", "Savanna"],
                correctAnswer: 2
            },
            {
                question: "Which of the following is an example of a primary consumer?",
                options: ["Herbivore", "Carnivore", "Omnivore", "Decomposer"],
                correctAnswer: 0
            },
            {
                question: "Which of the following is an abiotic factor in an ecosystem?",
                options: ["Temperature", "Animals", "Bacteria", "Plants"],
                correctAnswer: 0
            },
            {
                question: "Which of the following best describes the relationship between different species in a community?",
                options: ["Symbiosis", "Competition", "Predation", "All of the above"],
                correctAnswer: 3
            },
            {
                question: "Which of the following is a biotic component of an ecosystem?", 
                options: ["Water", "Air", "Rocks", "Animals"],
                correctAnswer: 3
            },
            {
                question: "Which of the following is an abiotic component of an ecosystem?",
                options: ["Bacteria", "Fungi", "Sunlight", "Plants"],
                correctAnswer: 2
            }
        ];

        // Global variables
        let currentQuestion = 1;
        const totalQuestions = questions.length;
        let answers = new Array(totalQuestions).fill(null);
        let selectedAnswers = new Array(totalQuestions).fill(null);
        let skippedQuestions = new Set();
        let answeredQuestions = new Set();
        let timer;
        let startTime;

        // Load question function
        function loadQuestion(questionNumber) {
            const questionData = questions[questionNumber - 1];
            const container = document.getElementById('question-container');
            
            container.innerHTML = `
                <h3 class="text-lg font-semibold mb-4">Question ${questionNumber}</h3>
                <p class="mb-4">${questionData.question}</p>
                <div class="space-y-2">
                    ${questionData.options.map((option, index) => `
                        <div class="flex items-center">
                            <input type="radio" id="option${index}" name="q${questionNumber}" value="${index}" 
                                ${selectedAnswers[questionNumber-1] === index ? 'checked' : ''} 
                                class="mr-2">
                            <label for="option${index}">${option}</label>
                        </div>
                    `).join('')}
                </div>
            `;

            const radioButtons = container.querySelectorAll('input[type="radio"]');
            radioButtons.forEach(radio => {
                radio.addEventListener('change', () => {
                    selectedAnswers[questionNumber-1] = parseInt(radio.value);
                });
            });

            updateNavigationButtons();
        }

        function initializeQuestionButtons() {
            const buttonContainer = document.getElementById('question-buttons');
            buttonContainer.innerHTML = '';
            for(let i = 1; i <= totalQuestions; i++) {
                const button = document.createElement('button');
                button.textContent = i;
                button.onclick = () => {
                    currentQuestion = i;
                    loadQuestion(currentQuestion);
                    updateNavigationButtons();
                };
                buttonContainer.appendChild(button);
            }
        }

        document.addEventListener('contextmenu', e => e.preventDefault());

        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.altKey || (e.key === 'F12') || e.key === 'Tab') {
                e.preventDefault();
            }
        });

        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                showWarningModal();
            }
        });

        document.addEventListener('fullscreenchange', function() {
            if (!document.fullscreenElement) {
                showWarningModal();
            }
        });

        function showWarningModal() {
            document.getElementById('warning-modal').classList.remove('hidden');
            document.getElementById('quiz-page').classList.add('blur-screen');
        }

        function closeWarningModal() {
            document.getElementById('warning-modal').classList.add('hidden');
            document.getElementById('quiz-page').classList.remove('blur-screen');
            document.documentElement.requestFullscreen().catch(err => {
                console.log('Error attempting to enable fullscreen:', err);
            });
        }

        function returnToLogin() {
            document.getElementById('warning-modal').classList.add('hidden');
            document.getElementById('quiz-page').classList.add('hidden');
            document.getElementById('login-page').classList.remove('hidden');
            document.getElementById('quiz-page').classList.remove('blur-screen');
            resetExam();
        }

        function resetExam() {
            document.getElementById('roll-number').value = '';
            document.getElementById('student-name').value = '';
            currentQuestion = 1;
            answers = new Array(totalQuestions).fill(null);
            selectedAnswers = new Array(totalQuestions).fill(null);
            skippedQuestions = new Set();
            answeredQuestions = new Set();
            if(timer) clearInterval(timer);
            updateNavigationButtons();
        }

        document.getElementById('login-button').addEventListener('click', async function() {
            const rollNumber = document.getElementById('roll-number').value.trim();
            const studentName = document.getElementById('student-name').value.trim();
            
            if (!rollNumber || !studentName) {
                alert('Please fill in all fields');
                return;
            }
            
            try {
                await document.documentElement.requestFullscreen();
                document.getElementById('login-page').classList.add('hidden');
                document.getElementById('quiz-page').classList.remove('hidden');
                document.getElementById('user-name').textContent = studentName;
                document.getElementById('user-roll-number').textContent = rollNumber;
                initializeQuestionButtons();
                loadQuestion(currentQuestion);
                startTime = new Date();
                startTimer();
                updateNavigationButtons();
            } catch (err) {
                alert('Fullscreen permission is required to start the exam');
            }
        });

        function startTimer() {
            let timeLeft = 3600; // 1 hour in seconds
            const timerDisplay = document.getElementById('timer');
            
            timer = setInterval(() => {
                const hours = Math.floor(timeLeft / 3600);
                const minutes = Math.floor((timeLeft % 3600) / 60);
                const seconds = timeLeft % 60;
                timerDisplay.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    submitTest();
                }
                timeLeft--;
            }, 1000);
        }

        function updateNavigationButtons() {
            const prevButton = document.getElementById('prev-question');
            const nextButton = document.getElementById('save-next');
            
            prevButton.disabled = currentQuestion === 1;
            nextButton.textContent = currentQuestion === totalQuestions ? 'Save' : 'Save & Next';
            
            updateQuestionButtons();
            updateCounts();
        }

        function updateQuestionButtons() {
            const buttons = document.getElementById('question-buttons').children;
            for (let i = 0; i < buttons.length; i++) {
                buttons[i].className = getQuestionButtonClass(i + 1);
            }
        }

        function getQuestionButtonClass(questionNumber) {
            if (questionNumber === currentQuestion) return 'question-active p-2 rounded';
            if (answeredQuestions.has(questionNumber)) return 'bg-green-500 text-white p-2 rounded';
            if (skippedQuestions.has(questionNumber)) return 'bg-yellow-500 text-white p-2 rounded';
            return 'bg-gray-300 p-2 rounded';
        }

        function updateCounts() {
            document.getElementById('answered-count').textContent = answeredQuestions.size;
            document.getElementById('skipped-count').textContent = skippedQuestions.size;
            document.getElementById('remaining-count').textContent = totalQuestions - (answeredQuestions.size + skippedQuestions.size);
        }

        document.getElementById('prev-question').addEventListener('click', function() {
            if (currentQuestion > 1) {
                currentQuestion--;
                loadQuestion(currentQuestion);
                updateNavigationButtons();
            }
        });

        document.getElementById('save-next').addEventListener('click', function() {
            if (selectedAnswers[currentQuestion - 1] !== null) {
                answeredQuestions.add(currentQuestion);
                skippedQuestions.delete(currentQuestion);
                answers[currentQuestion - 1] = selectedAnswers[currentQuestion - 1] === questions[currentQuestion - 1].correctAnswer;
            }
            
            if (currentQuestion < totalQuestions) {
                currentQuestion++;
                loadQuestion(currentQuestion);
            }
            updateNavigationButtons();
        });

        document.getElementById('skip').addEventListener('click', function() {
            skippedQuestions.add(currentQuestion);
            answeredQuestions.delete(currentQuestion);
            
            if (currentQuestion < totalQuestions) {
                currentQuestion++;
                loadQuestion(currentQuestion);
            }
            updateNavigationButtons();
        });

        document.getElementById('submit-test').addEventListener('click', submitTest);

        function submitTest() {
            if (timer) clearInterval(timer);

            const correctAnswers = answers.filter(answer => answer === true).length;
            const wrongAnswers = answers.filter(answer => answer === false).length;
            const skipped = skippedQuestions.size;
            const score = (correctAnswers / totalQuestions) * 100;

            document.getElementById('correct-count').textContent = correctAnswers;
            document.getElementById('wrong-count').textContent = wrongAnswers;
            document.getElementById('final-skipped-count').textContent = skipped;
            document.getElementById('final-score').textContent = score.toFixed(2);

            document.getElementById('performance-bar').style.width = `${score}%`;

            const endTime = new Date();
            const timeTaken = Math.floor((endTime - startTime) / 1000);
            const hours = Math.floor(timeTaken / 3600);
            const minutes = Math.floor((timeTaken % 3600) / 60);
            const seconds = timeTaken % 60;
            document.getElementById('time-taken').textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

            const resultDetails = document.getElementById('result-details');
            resultDetails.innerHTML = '';
            for (let i = 1; i <= totalQuestions; i++) {
                const status = answers[i - 1] === true ? 'Correct' : 
                               answers[i - 1] === false ? 'Wrong' : 
                               skippedQuestions.has(i) ? 'Skipped' : 'Not Attempted';
                resultDetails.innerHTML += `<p>Q${i}: ${status}</p>`;
            }

            document.getElementById('submit-test').classList.add('hidden');
            document.getElementById('result-container').classList.remove('hidden');
        }

        window.onload = function() {
            resetExam();
        };
    </script>
</body>
</html
